<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="fr"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>StatistiquesString.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">devopsprojet</a> &gt; <a href="index.source.html" class="el_package">DFrame</a> &gt; <span class="el_source">StatistiquesString.java</span></div><h1>StatistiquesString.java</h1><pre class="source lang-java linenums">package DFrame;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.Map;

public class StatistiquesString implements Statistiques{


    private Colonne&lt;String&gt; elems;
    private HashMap&lt;String, Integer&gt; elem_repete;
    private HashMap&lt;String, Integer&gt; pourcentage_elem;

    public StatistiquesString(Colonne&lt;String&gt; colonne)
<span class="fc" id="L15">    {</span>
<span class="fc" id="L16">        this.elems = colonne;</span>
<span class="fc" id="L17">        this.elem_repete = new HashMap&lt;&gt;();</span>
<span class="fc" id="L18">        this.pourcentage_elem = new HashMap&lt;&gt;();</span>
<span class="fc" id="L19">        remplitHashMap();</span>
<span class="fc" id="L20">    }</span>

    /**
     * Remplit un HashMap faisant la correspondance entre un élément et le nombre de fois qu'il apparaît
     */
    public void remplitHashMap()
    {
<span class="fc bfc" id="L27" title="All 2 branches covered.">        for(String elem: this.elems.getColonne())</span>
        {
<span class="fc bfc" id="L29" title="All 2 branches covered.">            if(this.elem_repete.containsKey(elem))</span>
            {
                //l'élément existe déjà, on augmente de 1 sa valeur
<span class="fc" id="L32">                this.elem_repete.put(elem, this.elem_repete.get(elem)+1);</span>
            }
            else
            {
                //l'élément n'existe pas encore, on ajoute l'élément comme la clef et 1 ( présent 1 fois)
<span class="fc" id="L37">                this.elem_repete.put(elem, 1);</span>
            }
<span class="fc" id="L39">        }</span>
<span class="fc" id="L40">    }</span>


    public HashMap&lt;String, Integer&gt; getPourcentage_elem() {
<span class="nc" id="L44">        return pourcentage_elem;</span>
    }

    public Colonne&lt;String&gt; getElems() {
<span class="nc" id="L48">        return elems;</span>
    }

    /**
     *
     * @return : une arrayList contenant le(s) tuple(s) qui est(sont) répété(s) le plus de fois
     */
    public ArrayList&lt;Pair&gt; plusGrossesRepetes()
    {
<span class="fc" id="L57">        Pair max = new Pair(&quot;&quot;, 0);</span>
<span class="fc" id="L58">        ArrayList&lt;Pair&gt; resultat = new ArrayList&lt;Pair&gt;();</span>

<span class="fc bfc" id="L60" title="All 2 branches covered.">        for(Map.Entry clef: this.elem_repete.entrySet())</span>
        {
<span class="fc bfc" id="L62" title="All 2 branches covered.">            if((int) clef.getValue() &gt; max.getRepet())</span>
            {
<span class="fc" id="L64">                resultat = new ArrayList&lt;Pair&gt;();</span>
<span class="fc" id="L65">                Pair new_max = new Pair(clef.getKey().toString(), (int) clef.getValue());</span>
<span class="fc" id="L66">                resultat.add(new_max);</span>
<span class="fc" id="L67">                max = new_max;</span>
<span class="fc" id="L68">            }</span>
<span class="pc bpc" id="L69" title="1 of 2 branches missed.">            else if((int)clef.getValue() == max.getRepet())</span>
            {
<span class="nc" id="L71">                Pair autre_max = new Pair(clef.getKey().toString(), (int) clef.getValue());</span>
<span class="nc" id="L72">                resultat.add(autre_max);</span>
            }
<span class="fc" id="L74">        }</span>

<span class="fc" id="L76">        return resultat;</span>
    }

    /**
     *
     * @return : la même colonne qu'en entrée mais sans les doublons s'il y en a
     */
    public Colonne&lt;String&gt; col_sansDoublon()
    {
<span class="fc" id="L85">        Colonne&lt;String&gt; resultat = new Colonne&lt;&gt;();</span>
<span class="fc bfc" id="L86" title="All 2 branches covered.">        for (Map.Entry tuple: this.elem_repete.entrySet())</span>
        {
<span class="fc" id="L88">            resultat.addElem(tuple.getKey().toString());</span>
<span class="fc" id="L89">        }</span>
<span class="fc" id="L90">        return resultat;</span>
    }

    /**
     * calcul le pourcentage de présence de chaque élément
     */
    @Override
    public void calculStats() {
<span class="fc" id="L98">        HashMap&lt;String, Integer&gt; pourcentage = new HashMap&lt;String, Integer&gt;();</span>

<span class="fc bfc" id="L100" title="All 2 branches covered.">        for(Map.Entry clef: this.elem_repete.entrySet())</span>
        {
<span class="fc" id="L102">            int prct = (int)clef.getValue()*100/this.elems.colonneSize();</span>
<span class="fc" id="L103">            pourcentage.put(clef.getKey().toString(), prct);</span>
<span class="fc" id="L104">        }</span>


<span class="fc" id="L107">        this.pourcentage_elem = pourcentage;</span>
<span class="fc" id="L108">    }</span>

    /**
     * affichage des stats une fois celle-ci calculées (pourcentages et l'élément le plus répété)
     */
    @Override
    public void afficheStats()
    {
<span class="nc" id="L116">        calculStats();</span>
        //on affiche les pourcentages
<span class="nc bnc" id="L118" title="All 2 branches missed.">        for(Map.Entry clef: this.pourcentage_elem.entrySet())</span>
        {

<span class="nc" id="L121">            System.out.println(&quot;elem : &quot;+clef.getKey()+ &quot; =&gt; &quot;+clef.getValue()+&quot;%&quot;);</span>
<span class="nc" id="L122">        }</span>

<span class="nc" id="L124">        System.out.println(&quot;Eléments le(s) plus répété(s)&quot;);</span>
<span class="nc bnc" id="L125" title="All 2 branches missed.">        for (Pair res: plusGrossesRepetes())</span>
        {
<span class="nc" id="L127">            System.out.println(res.getClef() +&quot; =&gt; &quot;+res.getRepet());</span>
<span class="nc" id="L128">        }</span>
<span class="nc" id="L129">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.6.202009150832</span></div></body></html>